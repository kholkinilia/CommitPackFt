# CommitPackFt and HumanEvalPack

## Overview
In this repo we explore datasets proposed in a [paper](https://arxiv.org/abs/2308.07124) that uses instruction 
tuning to get better results on a code generation/editing/explanation tasks:
* We look at [CommitPackFt](https://huggingface.co/datasets/bigcode/commitpackft) dataset, which is a filtered version
of CommitPack dataset. It consists of high-quality commits data. CommitPackFt can be used to instruction tune
* LLMs for code generation/editing/explanation 
purposes.
* We also look at the extension of HumanEval benchmark -- [HumanEvalPack](https://huggingface.co/datasets/bigcode/humanevalpack/viewer/python),
proposed in the same paper. This benchmark extends regular HumanEval benchmark with more languages and two additional 
tasks: code fixing (HumanEvalFix) and code explanation (HumanEvalExplain). We evaluate a [Refact](https://huggingface.co/smallcloudai/Refact-1_6B-fim) 
model on a Python subset of HumanEvalFix. This model was instruction tuned using CommitPackFt.

## Contents
The main contents of this repo lie in `notebooks` directory. There are two notebooks, which may be read as long reads:
* `commit_pack_ft_exploration.ipynb`, in which we look at CommitPackFt dataset and in the end give some thought on
the usefulness of commit messages for instruction tuning of code models.
* `refact_eval.ipynb`, in which we evaluate a Refact model on Python subset of HumanEvalFix benchmark and look at 
results and code fixes proposed by the model.

## Reproduction
To reproduce, what happens in notebooks, you can:
1. Clone this repo locally:

```shell
git clone https://github.com/kholkinilia/CommitPackFt.git
cd CommitPackFt
```

2. Install the required dependencies:
```shell
pip install -r requirements.txt
```

3. Finally, just run notebooks top to bottom and everything should work (hopefully).

There is a computationally intensive part with generating fixes. I kept the fixes generated by me in this repo in
`notebooks/eval_data{...}` directories. You can use these generations if you don't want to wait.

## References
* Firstly, of course, the paper introducing CommitPackFt and HumanEvalPack: https://arxiv.org/abs/2308.07124
* And, surely, the Refactor model: https://huggingface.co/smallcloudai/Refact-1_6B-fim
